[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The #TidyTuesday Cookbook",
    "section": "",
    "text": "Welcome!\nWelcome to the online version of The #TidyTuesday Cookbook by Nicola Rennie.\nThis book is currently a work-in-progress."
  },
  {
    "objectID": "index.html#about-the-author",
    "href": "index.html#about-the-author",
    "title": "The #TidyTuesday Cookbook",
    "section": "About the author",
    "text": "About the author\nNicola Rennie is a Lecturer in Health Data Science within the Centre for Health Informatics, Computing, and Statistics at Lancaster University. She holds a PhD in Statistics and Operational Research, focusing on analysing and visualising transport demand. Her current research is focused on applications of statistics and machine learning to health-related data, communicating statistics, and the effective teaching of data science. She has experience of teaching at both undergraduate and postgraduate level, in courses covering fundamentals of data science, population health, and statistical programming. Nicola has also previously worked in data science consultancy, and delivered training courses covering topics including advanced data visualisation with R, statistical modelling, and reproducible reporting. She is the author and maintainer of several R packages, including multiple {ggplot2} extension packages. Nicola is a regular speaker at R and data science meetups, and is the current chapter organiser of R-Ladies Lancaster. She is co-author of the Royal Statistical Society’s Best Practices for Data Visualisation Guide, and an active member of the Royal Statistical Society. Several of her data visualisations have been long-listed at the Information is Beautiful Awards."
  },
  {
    "objectID": "chapters/00-introduction.html#why-visualise-data",
    "href": "chapters/00-introduction.html#why-visualise-data",
    "title": "Introduction",
    "section": "Why visualise data?",
    "text": "Why visualise data?\nData visualisation can be a very effective and efficient means of communicating information.\nThat being said, the visualisations in this book are not necessarily always the most effective choice of visualisation for the data and relationship shown. Rather, this book aims to\ncreativity, technical …, alongside … ."
  },
  {
    "objectID": "chapters/00-introduction.html#what-is-tidytuesday",
    "href": "chapters/00-introduction.html#what-is-tidytuesday",
    "title": "Introduction",
    "section": "What is #TidyTuesday?",
    "text": "What is #TidyTuesday?\n#TidyTuesday (Community 2023) is a weekly social data project which aims to make learning to work with data easier, by providing real-world datasets. Participants are encouraged to explore the data shared via GitHub each week, create an output such as a data visualisation, and share their output alongside their code, with the community.\nAfter three years of weekly contributions, I’ve worked with around 150 datasets and created over 150 data visualisations. This book will present a subset of these visualisations, and describe the process used to create them. Each chapter will cover a different data visualisation, showing: the data exploration process; the choice of data visualisation type; the initial design ideas with hand-drawn sketches; the first build of a plot; and the iterative process of styling plots."
  },
  {
    "objectID": "chapters/00-introduction.html#background-knowledge",
    "href": "chapters/00-introduction.html#background-knowledge",
    "title": "Introduction",
    "section": "Background knowledge",
    "text": "Background knowledge\nThis book is primarily aimed at those who wish to develop their data visualisation skills in R. Readers of this book may find a basic knowledge of R, more specifically of the {tidyverse} ecosystem, useful though all code used in examples is fully explained. Readers do not need to be experienced in {ggplot2}, though this book will also be of interest to those who are. Readers of this book will be of interest to those who are already familiar with R (including {ggplot2}), and wish to develop their skills in designing data visualisations further. It will also be of interest to those who already design data visualisations using other tools, and want to learn how to do the equivalent in R."
  },
  {
    "objectID": "chapters/00-introduction.html#a-note-about-r-code",
    "href": "chapters/00-introduction.html#a-note-about-r-code",
    "title": "Introduction",
    "section": "A note about R code",
    "text": "A note about R code\nAll code in this was created using R version 4.3.0, and a complete list of package versions can be found in the Appendix.\n\nBase R pipe vs {magrittr} pipe\nIn R, the pipe operator takes the thing on its left and passes it along to the function on its right (Wickham, Çetinkaya-Rundel, and Grolemund 2023). You can find a full description of the pipe operator in R for Data Science. The pipe (%&gt;%) was first introduced to R via the {magrittr} package. Since version 4.1.0 of R, a version of the pipe (|&gt;) has existed in base R. The base R version of the pipe is used throughout the book. Although there are some difference between the two version of the pipe, in this book, they can be used interchangeably.\n\n\nNamespacing\nNamespacing (the pre-fixing of functions with the package name and ::) is used for all packages except {ggplot2} and base R packages. Namespacing is useful for two reasons (i) from a learning perspective, it makes it easier to recognise where functions come from and how they connect together, and (ii) from a programming perspective, it reduces conflicts and errors - something we all want less of!\n\n\nChanges to from earlier versions\nYou may notice that some of the final images differ slightly from those initially created and published on social media. You might also find some small differences in the code used to produce them if you compare the contents of this book to original scripts in the GitHub repository. These differences are likely due to one of four reasons:\n\npackages have since been updated and code has been changed to use newer syntax;\nsome aspects have been omitted from a visualisation to avoid explaining everything in Chapter 1 - but those aspects are all covered and linked to in later chapters;\nafter many years of practice, there may be more efficient ways of re-writing code from some of the earlier plots. Any changes are clearly labelled and discussed;\nsome images may be different due to copyright reasons.\n\n\n\n\n\nCommunity, R4DS Online Learning. 2023. “Tidy Tuesday: A Weekly Social Data Project.” https://github.com/rfordatascience/tidytuesday.\n\n\nWickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. R for Data Science. O-Reilly. https://r4ds.hadley.nz."
  },
  {
    "objectID": "chapters/14-technology-adoption.html#data",
    "href": "chapters/14-technology-adoption.html#data",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.1 Data",
    "text": "1.1 Data\n(Comin and B. 2004)\n\nhead(technology)\n\n# A tibble: 6 × 7\n  variable label                                iso3c  year group category value\n  &lt;chr&gt;    &lt;chr&gt;                                &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;\n1 BCG      % children who received a BCG immun… AFG    1982 Cons… Vaccines    10\n2 BCG      % children who received a BCG immun… AFG    1983 Cons… Vaccines    10\n3 BCG      % children who received a BCG immun… AFG    1984 Cons… Vaccines    11\n4 BCG      % children who received a BCG immun… AFG    1985 Cons… Vaccines    17\n5 BCG      % children who received a BCG immun… AFG    1986 Cons… Vaccines    18\n6 BCG      % children who received a BCG immun… AFG    1987 Cons… Vaccines    27\n\n\nwhat might be interesting"
  },
  {
    "objectID": "chapters/14-technology-adoption.html#initial-exloration",
    "href": "chapters/14-technology-adoption.html#initial-exloration",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.2 Initial exloration",
    "text": "1.2 Initial exloration\nsome initial base R exploratory plots\nLet’s look at something more specific\nWe can get a list of all ISO3 codes with unique(technology$iso3c)\n\n# subset of countries to look at further\ncountries &lt;- c(\"GBR\", \"USA\", \"SWE\", \"BRA\", \"NZL\", \"VEN\")\n\n# subset data for specific topic, years, and countries\nmeasles_data &lt;- technology |&gt;\n  dplyr::filter(\n    label == \"% children who received a measles immunization\",\n    year %in% c(1980, 2010),\n    iso3c %in% countries\n  )\nhead(measles_data)\n\n# A tibble: 6 × 7\n  variable       label                          iso3c  year group category value\n  &lt;chr&gt;          &lt;chr&gt;                          &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;\n1 pctimmunizmeas % children who received a mea… BRA    1980 Cons… Vaccines    57\n2 pctimmunizmeas % children who received a mea… BRA    2010 Cons… Vaccines    99\n3 pctimmunizmeas % children who received a mea… GBR    1980 Cons… Vaccines    53\n4 pctimmunizmeas % children who received a mea… GBR    2010 Cons… Vaccines    89\n5 pctimmunizmeas % children who received a mea… NZL    1980 Cons… Vaccines    80\n6 pctimmunizmeas % children who received a mea… NZL    2010 Cons… Vaccines    91\n\n\nphotos of sketches"
  },
  {
    "objectID": "chapters/14-technology-adoption.html#data-wrangling",
    "href": "chapters/14-technology-adoption.html#data-wrangling",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.3 Data wrangling",
    "text": "1.3 Data wrangling\n\nplot_data &lt;- measles_data |&gt;\n  dplyr::select(-c(group, category, variable, label)) |&gt;\n  dplyr::mutate(no_value = 100 - value) |&gt;\n  tidyr::pivot_longer(\n    cols = c(value, no_value),\n    names_to = \"YN\",\n    values_to = \"perc\"\n  ) |&gt;\n  tidyr::pivot_wider(names_from = \"year\", values_from = \"perc\") |&gt;\n  dplyr::mutate(YN = factor(YN)) |&gt;\n  dplyr::mutate(\n    perc_1980 = `1980` / 100,\n    perc_2010 = `2010` / 100\n  ) |&gt;\n  dplyr::select(-c(`1980`, `2010`)) |&gt;\n  dplyr::group_by(iso3c) |&gt;\n  dplyr::mutate(\n    ymax_1980 = cumsum(perc_1980),\n    ymax_2010 = cumsum(perc_2010)\n  )\nhead(plot_data)\n\n# A tibble: 6 × 6\n# Groups:   iso3c [3]\n  iso3c YN       perc_1980 perc_2010 ymax_1980 ymax_2010\n  &lt;chr&gt; &lt;fct&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 BRA   value         0.57      0.99      0.57      0.99\n2 BRA   no_value      0.43      0.01      1         1   \n3 GBR   value         0.53      0.89      0.53      0.89\n4 GBR   no_value      0.47      0.11      1         1   \n5 NZL   value         0.8       0.91      0.8       0.91\n6 NZL   no_value      0.2       0.09      1         1"
  },
  {
    "objectID": "chapters/14-technology-adoption.html#the-ggforce-extension-package",
    "href": "chapters/14-technology-adoption.html#the-ggforce-extension-package",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.4 The {ggforce} extension package",
    "text": "1.4 The {ggforce} extension package\nwhat is ggforce\n(Pedersen 2022)\n\n1.4.1 Gauge charts\n\n1.4.2 geom_arc_bar()\n\n\n1.4.3 Reformatting data\ngauge data\nthis changed from original mutate_at\n\ngauge_data &lt;- plot_data |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::mutate(\n    ymin_1980 = c(rbind(\n      rep(0, length(countries)),\n      (dplyr::slice_head(plot_data, n = -1) |&gt; dplyr::pull(ymax_1980))\n      ))\n  ) |&gt;\n  dplyr::mutate(\n    ymin_2010 = c(rbind(\n      rep(0, length(countries)),\n      (dplyr::slice_head(plot_data, n = -1) |&gt; dplyr::pull(ymax_2010))\n      ))\n  ) |&gt;\n  dplyr::group_by(iso3c) |&gt;\n  dplyr::mutate(\n    dplyr::across(dplyr::starts_with(\"y\", ignore.case = FALSE),\n                  ~ scales::rescale(., to = pi * c(-0.5, 0.5), from = 0:1))\n  )"
  },
  {
    "objectID": "chapters/14-technology-adoption.html#initial-plots",
    "href": "chapters/14-technology-adoption.html#initial-plots",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.5 Initial plots",
    "text": "1.5 Initial plots\nbasic plot\n\nlibrary(ggplot2)\nbasic_plot &lt;- ggplot(data = gauge_data) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.7, r = 1,\n      start = ymin_2010, end = ymax_2010,\n      fill = YN\n    )\n  ) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.2, r = 0.5,\n      start = ymin_1980, end = ymax_1980,\n      fill = YN\n    )\n  ) +\n  facet_wrap(~iso3c, nrow = 2)\nbasic_plot\n\n\n\nFigure 1.1: Initial plot created using geom_arc_bar() from {ggforce}, facetted by different countries.\n\n\n\n\n1.5.1 Colors\n\nhighlight_col &lt;- \"#990c58\"\nsecond_col &lt;- \"#949398\"\nbg_col &lt;- \"#dedede\"\n\nadd new colors to basic plot\n\nbasic_plot &lt;- ggplot(data = gauge_data) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.7, r = 1,\n      start = ymin_2010, end = ymax_2010,\n      fill = YN\n    ),\n    color = second_col\n  ) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.2, r = 0.5,\n      start = ymin_1980, end = ymax_1980,\n      fill = YN\n    ),\n    color = second_col\n  ) +\n  facet_wrap(~iso3c, nrow = 2)\n\nadd scale fill\n\ncolor_plot &lt;- basic_plot +\n  scale_fill_manual(\n    breaks = c(\"value\", \"no_value\"),\n    labels = c(\"Immunised\", \"Not Immunised\"),\n    values = c(highlight_col, second_col)\n  )\ncolor_plot\n\n\n\nFigure 1.2: Edited version of the previous plot with colors changed from defaults to grey and dark pink."
  },
  {
    "objectID": "chapters/14-technology-adoption.html#text-and-fonts",
    "href": "chapters/14-technology-adoption.html#text-and-fonts",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.6 Text and fonts",
    "text": "1.6 Text and fonts\nload font\n\nsysfonts::font_add_google(name = \"Ubuntu\", family = \"ubuntu\")\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi = 300)\nbody_font &lt;- \"ubuntu\"\n\nwrite text social to add\n\ntitle &lt;- \"Measles Vaccinations\"\nsubtitle &lt;- \"The inner bar represents the percentage of children who received a measles immunisation in 1980, whilst the outer bar represents the percentage in 2010. An increase in immunisation levels between 1980 and 2010 is seen across all countries.\\n\\nN. Rennie | Data: data.nber.org (10.3386/w15319)\"\n\ntext labels\n\ntext_df &lt;- data.frame(\n  x = c(0.35, 0.85),\n  y = c(-0.1, -0.1),\n  label = c(1980, 2010)\n)\n\n\ntext_plot &lt;- color_plot +\n  geom_text(\n    data = text_df,\n    mapping = aes(x = x, y = y, label = label),\n    family = body_font,\n    size = 6\n  ) +\n  labs(\n    title = title,\n    subtitle = subtitle\n  )\ntext_plot\n\n\n\nFigure 1.3: Previous plot with additional labels indicating the year on each gauge chart, as well as an added title and subtitle."
  },
  {
    "objectID": "chapters/14-technology-adoption.html#further-styling",
    "href": "chapters/14-technology-adoption.html#further-styling",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.7 Further styling",
    "text": "1.7 Further styling\ntidy up\n\ntheme_plot1 &lt;- text_plot +\n  coord_fixed() +\n  theme_void(base_family = body_font)\ntheme_plot1\n\n\n\nFigure 1.4: Edited version of previous plot with fixed coordinate system to prevent squashing, and all theme elements removed.\n\n\n\nfurther theming\n\nmain_plot &lt;- theme_plot1 +\n  theme(\n    legend.position = \"none\",\n    plot.background = element_rect(fill = bg_col, color = bg_col),\n    panel.background = element_rect(fill = bg_col, color = bg_col),\n    strip.text = element_text(face = \"bold\", size = rel(1.2)),\n    plot.title = element_text(\n      margin = margin(t = 10, b = 10),\n      face = \"bold\",\n      size = rel(1.5)\n    ),\n    plot.subtitle = ggtext::element_textbox_simple(\n      maxwidth = 0.8,\n      lineheight = 0.5,\n      hjust = 0.5,\n    ),\n    plot.margin = margin(5, 5, 5, 5)\n  )\nmain_plot\n\n\n\nFigure 1.5: Further styling of gauge chart to change background color, prevent overlapping in the subtitle text, and increase the size of the title."
  },
  {
    "objectID": "chapters/14-technology-adoption.html#adding-a-better-legend",
    "href": "chapters/14-technology-adoption.html#adding-a-better-legend",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.8 Adding a better legend",
    "text": "1.8 Adding a better legend\nAs we already saw in chapter …,\n\nlegend_plot &lt;- ggplot(data = dplyr::filter(gauge_data, iso3c == \"USA\")) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.7, r = 1,\n      start = ymin_2010, end = ymax_2010,\n      fill = YN\n    ),\n    color = second_col\n  ) +\n  ggforce::geom_arc_bar(\n    mapping = aes(\n      x0 = 0, y0 = 0,\n      r0 = 0.2, r = 0.5,\n      start = ymin_1980, end = ymax_1980,\n      fill = YN\n    ),\n    color = second_col\n  ) +\n  geom_text(\n    data = text_df,\n    mapping = aes(x = x, y = y, label = label),\n    family = body_font, size = 6\n  ) +\n  facet_wrap(~iso3c) +\n  scale_fill_manual(\n    breaks = c(\"value\", \"no_value\"),\n    labels = c(\"Immunised\", \"Not Immunised\"),\n    values = c(highlight_col, second_col)\n  ) +\n  labs(title = \"How do I read this plot?\") +\n  coord_fixed() +\n  theme_void(base_family = body_font) +\n  theme(\n    legend.position = \"bottom\",\n    legend.title = element_blank(),\n    plot.background = element_rect(\n      fill = \"transparent\", color = \"transparent\"\n    ),\n    panel.background = element_rect(\n      fill = \"transparent\", color = \"transparent\"\n    ),\n    plot.title = element_text(\n      hjust = 0.5,\n      face = \"italic\",\n      margin = margin(t = 10, b = 10)\n    ),\n    plot.margin = margin(5, 5, 5, 5)\n  )\nlegend_plot\n\n\n\nFigure 1.6: Version of the gauge chart shown only for USA which will act as a legend."
  },
  {
    "objectID": "chapters/14-technology-adoption.html#combining-legend-with-patchwork",
    "href": "chapters/14-technology-adoption.html#combining-legend-with-patchwork",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.9 Combining legend with {patchwork}",
    "text": "1.9 Combining legend with {patchwork}\nJoin with {patchwork}\n\nlibrary(patchwork)\nfinal_plot &lt;- main_plot + inset_element(legend_plot, 0.5, 0.9, 1.1, 1.4) &\n  theme(\n    plot.background = element_rect(fill = bg_col, color = bg_col),\n    panel.background = element_rect(fill = bg_col, color = bg_col)\n  )\nfinal_plot\n\n\n\nFigure 1.7: Final gauge chart with overlaid legend in top right corner.\n\n\n\nAs with previous examples, don’t be fooled into thinking …\nsome last thoughts"
  },
  {
    "objectID": "chapters/14-technology-adoption.html#reflection",
    "href": "chapters/14-technology-adoption.html#reflection",
    "title": "1  Technology adoption: making donut charts and gauge charts with {ggforce}",
    "section": "\n1.10 Reflection",
    "text": "1.10 Reflection\nAre gauge charts useful?\nWhat would I change?\n\n\n\n\nComin, D., and Hohijn B. 2004. “Cross-Country Technological Adoption: Making the Theories Face the Facts.” Journal of Monetary Economics January 2004: 39–83.\n\n\nPedersen, Thomas Lin. 2022. Ggforce: Accelerating ’Ggplot2’. https://CRAN.R-project.org/package=ggforce."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Comin, D., and Hohijn B. 2004. “Cross-Country Technological\nAdoption: Making the Theories Face the Facts.” Journal of\nMonetary Economics January 2004: 39–83.\n\n\nCommunity, R4DS Online Learning. 2023. “Tidy Tuesday: A Weekly\nSocial Data Project.” https://github.com/rfordatascience/tidytuesday.\n\n\nPedersen, Thomas Lin. 2022. Ggforce: Accelerating ’Ggplot2’. https://CRAN.R-project.org/package=ggforce.\n\n\nWickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023.\nR for Data Science. O-Reilly. https://r4ds.hadley.nz."
  }
]